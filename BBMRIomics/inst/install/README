
########################################################################
This README describes additional configuration and installation of
RStudio server/shiny server and R packages on the surfSARA HPC Virtual
Machines

last editted by: Maarten van Iterson
date: 15 March 2017

########################################################################


########################################################################
Install R packages
########################################################################

clean Ubuntu installation require a few additional libraries
require for openssl required for R package devtools:

> sudo apt-get install libssl-dev

require for R package XML

> sudo apt-get install libxml2-dev 

when installing using devtools first run:

R> httr::set_config(httr::config( ssl_verifypeer = 0L))
devtools::install_github(<github_package>)

########################################################################
Additional R/RStudio Server configuration
########################################################################

overwrite default R library path:

add to /etc/rstudio/rsession.conf
r-libs-user=/opt/R/microsoft-r/3.3/lib64/R/library

add to /etc/profile
export R_LIBS_SITE=/opt/R/microsoft-r/3.3/lib64/R/library


.First <- function() {
cat("\n   setting MKL threads to 2!\n\n")
RevoUtilsMath::setMKLthreads(2)
}

##do not ask for saving and prevent load .RData/.Rhistory

utils::assignInNamespace("q", 
   function(save = "no", status = 0, runLast = TRUE) {
     .Internal(quit(save, status, runLast))
   }, "base")    

utils::assignInNamespace("quit", 
   function(save = "no", status = 0, runLast = TRUE) {
     .Internal(quit(save, status, runLast))
   }, "base")

##optionally set user memory limit
ulimit::memory_limit(10240) ##in MiB = 10Gb

########################################################################
Shiny Server configuration
########################################################################

TODO add!!!



